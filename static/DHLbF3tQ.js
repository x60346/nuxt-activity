import{_ as w}from"./Cm3B--nH.js";import{_ as y}from"./hH-20WPK.js";import{m,r as h,f as b,n as k,c as p,a as o,d as c,t as d,q as a,b as A,p as N,F as P,s as B,v as D,o as u,x as F,w as I}from"./BFppciiL.js";import{u as L}from"./BwavbaIJ.js";const C={class:"max-w-screen-xl mx-auto p-3"},S={class:"flex mb-3"},T={class:"mr-3 text-2xl"},V={class:"text-sm"},j={class:"relative flex flex-col gap-y-2 min-h-50"},E={class:"absolute top-0 left-0 w-full bg-gray-100 h-full rounded p-2 flex items-center justify-center dark:bg-gray-800"},z={__name:"AroundActivity",setup(U){const{getApiNearbyActivity:f}=L();let n=m([]),i=h(!0),s=m({lat:0,lon:0});b(s,t=>{x(t.lat,t.lon)});function _(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(t=>{s.lat=t.coords.latitude,s.lon=t.coords.longitude,window.scrollTo(0,0)},g):alert("當前瀏覽器不支援定位！")}function g(){alert("無法找到您的位置，請重新嘗試或確認網路狀態。")}async function x(t,e){i.value=!0;const r=await f(t,e);n.splice(0),Object.assign(n,r.data),i.value=!1}return k(()=>{_(),window.scrollTo(0,0)}),(t,e)=>{const r=w,v=y;return u(),p("div",C,[o("div",S,[o("h2",T,[e[0]||(e[0]=c(" 周圍活動 ")),o("p",V," （"+d(a(s).lon.toFixed(2))+"，"+d(a(s).lat.toFixed(2))+"） ",1)]),o("button",{class:"cursor-pointer bg-emerald-500 rounded text-white py-2 px-4 hover:bg-emerald-600",onClick:_},[A(r,{icon:"repeat"}),e[1]||(e[1]=c(" 重新定位 "))])]),o("div",j,[(u(!0),p(P,null,B(a(n),l=>(u(),F(v,{key:l.UID,to:{path:"/activityInfo/"+l.UID},class:"listItem p-2 mx-2"},{default:I(()=>[c(d(l.title),1)]),_:2},1032,["to"]))),128)),N(o("div",E," Loading... ",512),[[D,a(i)]])])])}}};export{z as default};
